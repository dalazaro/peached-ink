<% user = current_user %>
<% is_owner = user ? user.id == @collection.user_id : false %>

<div class="component container">

  <%= link_to "Back to Collections", collections_path, class: "back-to" %>

  <h2><%= @collection.name %></h2>
  <h3 class="text-muted"><%= (@collection.description).gsub("\r\n", "<br>").html_safe %></h3>

  <% if is_owner %>
    <div class="row">
      <div class="col">
        <%= button_to "Edit", edit_collection_path(@collection), method: :get, class: "btn btn-warning" %>
      </div>
      <div class="col">
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteConfirm">
          Delete
        </button>
      </div>
    </div>
  <% end %>

  <!-- Carousel Slideshow -->
  <div class="image">
    <div id="carouselControls" class="carousel slide img-thumbnail" data-ride="carousel">
      <div class="carousel-inner">
        <% if @collection.illustration01? %>
          <div class="carousel-item active">
            <%= image_tag(@collection.illustration01, class: "img-fluid") if @collection.illustration01? %>
          </div>
        <% end %>
        <% if @collection.illustration02? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration02, class: "img-fluid") if @collection.illustration02? %>
          </div>
        <% end %>
        <% if @collection.illustration03? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration03, class: "img-fluid") if @collection.illustration03? %>
          </div>
        <% end %>
        <% if @collection.illustration04? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration04, class: "img-fluid") if @collection.illustration04? %>
          </div>
        <% end %>
        <% if @collection.illustration05? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration05, class: "img-fluid") if @collection.illustration05? %>
          </div>
        <% end %>
        <% if @collection.illustration06? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration06, class: "img-fluid") if @collection.illustration06? %>
          </div>
        <% end %>
        <% if @collection.illustration07? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration07, class: "img-fluid") if @collection.illustration07? %>
          </div>
        <% end %>
        <% if @collection.illustration08? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration08, class: "img-fluid") if @collection.illustration08? %>
          </div>
        <% end %>
        <% if @collection.illustration09? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration09, class: "img-fluid") if @collection.illustration09? %>
          </div>
        <% end %>
        <% if @collection.illustration10? %>
          <div class="carousel-item">
            <%= image_tag(@collection.illustration10, class: "img-fluid") if @collection.illustration10? %>
          </div>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>

  <!-- Thumbnails -->
  <div class="container">

    <div class="row">
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration01, class: "img-fluid img-thumbnail") if @collection.illustration01? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration02, class: "img-fluid img-thumbnail") if @collection.illustration02? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration03, class: "img-fluid img-thumbnail") if @collection.illustration03? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration04, class: "img-fluid img-thumbnail") if @collection.illustration04? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration05, class: "img-fluid img-thumbnail") if @collection.illustration05? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration06, class: "img-fluid img-thumbnail") if @collection.illustration06? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration07, class: "img-fluid img-thumbnail") if @collection.illustration07? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration08, class: "img-fluid img-thumbnail") if @collection.illustration08? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration09, class: "img-fluid img-thumbnail") if @collection.illustration09? %>
      </div>
      <div class="col-6 col-md-3 image">
        <%= image_tag(@collection.illustration10, class: "img-fluid img-thumbnail") if @collection.illustration10? %>
      </div>
    </div>

  </div>

  <!-- Modal -->
  <div class="modal fade" id="deleteConfirm" tabindex="-1" role="dialog" aria-labelledby="deleteCollection" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteCollection">Delete "<%= @collection.name %>"</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          You are about to delete this entire collection. Are you sure you want to do this?
        </div>
        <div class="modal-footer">
          <%= button_to "Delete", "/collections/#{@collection.id}", method: :delete, class: "btn btn-danger" %>
        </div>
      </div>
    </div>
  </div>

</div>
